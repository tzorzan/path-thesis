\documentclass[a4paper, 12pt, twoside, openright]{book}
\usepackage[english]{babel}
\usepackage[T1]{fontenc}
\usepackage[latin1]{inputenc}
\usepackage{fancyhdr}
\usepackage{float}
\usepackage{graphicx}
\usepackage{caption}
\usepackage{subcaption}
\usepackage{wrapfig}

%------------------------------ colors
\usepackage[usenames,dvipsnames,table]{xcolor} % use colors on table and more
\definecolor{333}{RGB}{51, 51, 51} % define custom color
%------------------------------ source code
\usepackage{listings}
\lstset{
  basicstyle=\footnotesize\sffamily,
  commentstyle=\itshape\color{gray},
  captionpos=b,
  frame=shadowbox,
  language=HTML,
  rulesepcolor=\color{333},
  tabsize=2
}
%------------------------------ define Abstract environment, missing in the 'book' class
\newenvironment{abstract}{\cleardoublepage \null \vfill \begin{center}\bfseries\abstractname \end{center}}{\vfill\null}
\addto\captionsenglish{\renewcommand*\abstractname{Sommario}} % change Abstract title
%------------------------------ active url
\usepackage{url}
\renewcommand{\UrlFont}{\color{black}\small\ttfamily}
\usepackage[colorlinks=true, linkcolor=black, citecolor=black, urlcolor=black]{hyperref} % active ref
%------------------------------ macros
\newcommand{\sectionname}{Section} % define Section ref
\newcommand{\subsectionname}{Sub-section} % define Sub-section ref
\renewcommand*\arraystretch{1.4} % tables padding


\begin{document}
\frontmatter

\begin{titlepage} %------------------------------ TITLE PAGE
\begin{center}
\vbox to0pt{\vbox to\textheight{\vfill \includegraphics[width=11.5cm]{images/unipd-light.png} \vfill}\vss}

\hspace{0.5cm}
\begin{minipage}{.20\textwidth}
  \includegraphics[height=2.5cm]{images/unipd-bn.png}
\end{minipage}\begin{minipage}{.90\textwidth}
  \begin{table}[H]
  \begin{tabular}{l}
  \scshape{\Large{\bfseries{Università degli Studi di Padova}}} \\
  \hline \\
  \scshape{\Large{Dipartimento di Matematica}} \\
  \end{tabular}
  \end{table}
\end{minipage}

\vspace{1cm}
\emph{\Large{Corso~di~Laurea~Magistrale~in~Informatica}} \\
\vspace{0.5cm}
\emph{\Large{Indirizzo~Sistemi}} \\
\vspace{1.5cm}
\scshape{\Large{\bfseries{PathS: un servizio Location-Based per percorsi alternativi}}} \\
\vspace{0.2cm} \linespread{1} \scshape{\large{\bfseries{(PathS: a Location-Based service for alternative routes)}}}
\end{center}

\vfill
\begin{normalsize}
\begin{flushleft}
  \hspace{45pt} \textit{Laureando} \hspace{160pt} \textit{Relatore}\\
  \vspace{5pt}
  \hspace{30pt} \large{\textbf{Tobia Zorzan}} \hspace{70pt} \large{\textbf{Prof. Claudio Palazzi}}\\
  \vspace{10pt}
  \hspace{260pt} \normalsize{\textit{Co-relatore}}\\
  \vspace{5pt}
  \hspace{200pt} \large{\textbf{Prof.ssa Ombretta Gaggi}}
\end{flushleft}
\end{normalsize}

\vfill
\begin{center}
\hspace{-0.2cm}
\line(1, 0){360}

\textsc{Anno Accademico 2014/2015}
\end{center}
\end{titlepage}


%-\cleardoublepage % make left page blank
%-\thispagestyle{empty} %------------------------------ DEDICA

%-\null
%-\vspace{2cm}
%-\begin{flushright}
%-A ...
%-\end{flushright}
%-\vfill

%-\begin{quote}
%-  Quote

%-  \textit{Author}
%-\end{quote}
%-\vfill
%-\null


\begingroup %------------------------------ CONTENTS
  \makeatletter
  \let\ps@plain\ps@empty
  \makeatother
  \tableofcontents
  \clearpage
\endgroup


\begin{abstract} %------------------------------ ABSTRACT
\markboth{}{} % remove header
\thispagestyle{empty}
I recenti sviluppi dei dispositivi \emph{smartphone}, in particolare l'inclusione di sensori sempre più evoluti, ha portato alla definizione di un nuovo paradigma denominato \emph{Web\textsuperscript{2}} (\emph{Web Squared}). La diffusione capillare di questi strumenti consente di creare una rete di sensori distribuiti in grado di raccogliere una ingente mole di dati. I dati stessi possono essere quindi elaborati e fornire il supporto a nuovi servizi che non si basano sulle sole informazioni \emph{statiche} ma su un contesto \emph{dinamico} modificato dall'interazione degli utenti. Il progetto \emph{PathS} vuole essere un prototipo che segue questo paradigma. La sua componente \emph{client} raccoglie informazioni aggiuntive sui percorsi pedonali percorsi dagli utenti. La parte \emph{server} elabora le informazioni raccolte e mantiene una base di dati in grado di supportare servizi di interrogazione che adottano criteri aggiuntivi a quelli tradizionali.
Si espone quindi quali sono stati i principi e le valutazioni eseguite nella realizzazione del componente \emph{PathS Server}, i risultati raggiunti e le possibili aree di miglioramento individuate.
\end{abstract}


\mainmatter

\chapter{Introduzione} %------------------------------ INTRODUZIONE
\thispagestyle{empty}

Introduzione al progetto. Presentazione dello scopo principale e degli attori coinvolti. Rassegna del contenuto dei capitoli.

\chapter{Contesto e lavori correlati} %------------------------------ CONTESTO
\thispagestyle{empty}
In questo capitolo si presenta il contesto in cui si è sviluppato il progetto \emph{PathS} ed alcuni concetti fondamentali collegati all'ambito di applicazione. Si citano inoltre progetti con finalità simili e approcci ritenuti interessanti punti di riferimento.

\section{Web\textsuperscript{2} e Opportunistic Sensing}
Una rete di sensori o \emph{Sensor Network} è composta di elementi autonomi e distribuiti atti al monitoraggio di determinati parametri ambientali. Ciascun nodo ha capacità autonome di calcolo, percezione e misurazione dell'ambiente circostante, comunicazione ed eventualmente di mobilità. Molte ricerche si sono focalizzate in questo ambito, in particolare con lo scopo di definire un sistema affidabile e decentralizzato per la comunicazione e il supporto a servizi in questo scenario. Raramente questo tipo di soluzioni sono andate oltre l'ambito della sperimentazione fino all'applicazione su larga scala.
Il recente sviluppo tecnologico e la diffusione capillare dei dispositivi \emph{smartphone} ha radicalmente modificato la situazione, aprendo la possibilità ad importanti evoluzioni. Di fatto anche un dispositivo base ha tutte le caratteristiche necessarie, essendo dotato di un sistema GPS, moduli di connessione alla rete dati e numerosi sensori tra cui quello di prossimità, luminosità, microfono, fotocamera e accelerometri. In questo modo si possono coprire ampie zone geografiche con un buon numero di dispositivi, offrendo sia l'occasione di applicare le ricerche sviluppate nell'ambito delle \emph{sensor neteorks}, sia di esplorare scenari del tutto nuovi. Ciò che rende ancora più interessante l'applicazione di una rete pervasiva di dispositivi, non è solo la possibilità di migliorare i servizi per gli utilizzatori diretti, ma la possibilità di studiare scenari del tutto nuovi a giovamento dell'intera società.
Pensiamo a quella che è già stata una grande evoluzione del mondo di internet, ovvero il \emph{Web 2.0}. Il suo avvento è fatto coincidere con la diffusione dei social networks, alla cui base c'è l'elevato livello di interazione tra il sito Web e gli utenti stessi. In ogni caso è richiesta una interazione diretta dell'utilizzatore, il quale consapevolmente contribuisce ad aumentare la base delle informazioni. Lo sviluppo di alcune tecnologie specifiche (tra cui \emph{AJAX}) ha permesso lo scambio di dati in background fra Web browser e server consentendo l'aggiornamento dinamico della pagina senza esplicito ricaricamento da parte dell'utente. Fondamentalmente si è passati da un Web statico a uno di tipo dinamico e sociale in cui l'utente non è più solo un lettore e un consumatore passivo di contenuti, ma è il principale creatore di essi.
La diffusione capillare di questi dispositivi con sensori avanzati, apre la strada al paradigma \emph{Web\textsuperscript{2}} in cui la quantità di dati, raccolta anche senza l'esperienza utente diretta, non aumenta in modo lineare ma letteralmente esplode con andamento esponenziale. Diventa quindi di fondamentale importanza le modalità con cui si raccoglie questa mole di dati e i principi di design con cui si imposta lo sviluppo di applicazioni in questo contesto. Una buona analisi tecnica e un'architettura di rifermento per lo sviluppo di servizi \emph{Web\textsuperscript{2}} basati su reti di sensori \emph{smartphone} è fornita da Calma, Palazzi e Bujari in \cite{web2palazzi}. Nell'articolo è introdotto e sviluppato il concetto di \emph{opportunistic sensing} il quale è ritornato molto utile anche nel progetto \emph{PathS}. Gli autori espongono due criteri fondamentali secondo cui categorizzare le applicazioni in ambito \emph{Web Squared}: il primo riguarda la scala di rilevamento, il secondo è il grado di coinvolgimento degli utenti. Considerando la scala di rilevamento possiamo distinguere:

\begin{itemize}
\item \textbf{personale}: progettata per utenti singoli e i risultati vengono visualizzati solo all'utente stesso, senza la loro condivisione. Un esempio di queste può essere \emph{Dankam}, applicazione che aiuta nell'identificazione dei colori le persone affette da daltonismo;
\item \textbf{di gruppo}: ad esempio \emph{Nike+ o Runtastic}, applicazioni in cui un gruppo di persone con interessi affini condivide informazioni spesso sfruttando la connessione ai popolari social network;
\item \textbf{di comunità}: i dati sono raccolti da una vasta gamma di persone e i risultati condivisi pubblicamente per renderli disponibili a tutti gli utenti. Un'esempio di applicazione è Google Maps e la relativa segnalazione dei tratti trafficati.
\end{itemize}
\begin{figure}
\centering
\begin{subfigure}{.33\textwidth}
  \centering
  \includegraphics[height=6cm]{images/dankam2}
  \caption{\footnotesize{Dankam}}
  \label{fig:dankam}
\end{subfigure}%
\begin{subfigure}{.33\textwidth}
  \centering
  \includegraphics[height=6cm]{images/nikeplus}
  \caption{\footnotesize{Nike+}}
  \label{fig:nike+}
\end{subfigure}
\begin{subfigure}{.33\textwidth}
  \centering
  \includegraphics[height=6cm]{images/googlemaps}
  \caption{\footnotesize{Google Maps}}
  \label{fig:googlemaps}
\end{subfigure}
\end{figure}

Valutando invece il coinvolgimento con l'utente, le applicazioni di questa categoria si possono suddividere in:
\begin{itemize}
  \item \textbf{partecipative}: ovvero la raccolta dei dati avviene tramite il coinvolgimento esplicito e diretto dell'utente. Ci si affida quindi all'entusiasmo e alla relazione diretta con gli utilizzatori i quali volontariamente eseguono l'applicazione e raccolgono i dati necessari. Solitamente le informazioni che derivano da questa tipologia sono molto accurate e ben distribuite anche per la possibilità di una opportuna pianificazione. La controparte è che spesso non è facile ottenere una sufficiente base di copertura se non si dispone del bacino di utenza e delle risorse necessarie. 
  \item \textbf{opportunistiche}: in cui l'acquisizione delle informazioni avviene tramite i sensori del dispositivo in determinate situazioni di utilizzo, anche se in quel momento non è l'attività principale. La raccolta avviene quindi in \emph{background} informando, ma non richiedendo necessariamente l'attenzione, dell'utente. In qualche modo si ``distrae'' l'utilizzatore con una attività primaria dall'alto livello di gradimento e nel frattempo si approfitta della situazione per catturare le informazioni necessarie. L'aspetto negativo di questo approccio è principalmente tecnico, dato che la sovrapposizione di più attività comporta un maggiore dispendio di risorse del dispositivo (\emph{cpu}, batteria, rete ...) e al tempo stesso gli algoritmi che devono interpretare i dati provenienti dai sensori e identificare le situazioni \emph{propizie} sono particolarmente complessi. Questo tipo di approccio risulta particolarmente utile per le applicazioni \emph{di comunità} che, pur raccogliendo pochi campioni, possono contare su un'ampio bacino di utenza.
\end{itemize}
Nello sviluppo del progetto \emph{PathS} ed in particolare per la progettazione della componente \emph{client} si è pensato di sfruttare entrambi questi aspetti. Tramite il coinvolgimento diretto di alcuni studenti e il coordinamento del Prof. Palazzi e dei suoi collaboratori, è stat organizzata una campagna di campionamento massivo della zona universatiria e dei dintorni. Questo ha consentito sia di valutare il funzionamento del sistema e di raccogliere numerosi \emph{feedback} che di raccogliere una consistente base di informazioni per l'area di riferimento. Per integrare e ampliare questa base di partenza, si è pensato ad un approccio di tipo opportunistico presentato in dettaglio nel capitolo successivo.

Altro aspetto interessante proposto nello stesso articolo è un principio di architettura software secondo cui impostare un servizio basato sul paradigma \emph{Web\textsuperscript{2}}.


\section{Mobility Data Managment and Exploration}
Introduzione ai Mobility Data, cosa sono e a cosa possono servire. Panoramica sui requisiti necessari alla persistenza, all'elaborazione e all'interrogazione di questo tipo di dati. Dettaglio sulle tecniche di \emph{Trajectory Reconstruction}. Dettaglio sul tipo di problemi che risolve la gestione dei \emph{Mobility Data} con sistemi complessi tipo HERMES. Tutto materiale tratto da \cite{mdme} in particolare i primi capitoli e il cap. 3.
Perchè non abbiamo utilizzato questo approccio per lo sviluppo del progetto. 

\section{Versione precedente e lavori correlati}
Presentazione progetto Path 1.0 e valutazioni. Motivazioni sviluppo nuova architettura. 
Accenno ai progetti di Mobile Crowd Sensing (Crowd++ \cite{crowdplusplus} e Partecipact \cite{participact}).

\chapter{PathS Client} %------------------------------ PATHS CLIENT
\thispagestyle{empty}

Introduzione alla componente \emph{client} di \emph{PathS}. 

\section{Requisiti}
Presentazione degli obiettivi riguardanti la parte client:
\begin{itemize}
\item raccogliere campioni tramite sensore di luminosità e microfono;
\item offrire indicazioni di percorso;
\item coinvolgere utente (tramite esperienza Augmented Reality).
\end{itemize}

\section{Tecnologie}
Riassunto delle tecnologie adottate per la realizzazione della componente \emph{client}: AndroidSDK, Wikitude.

\section{Stato dell'arte}
Risultati ottenuti con la parte client. Funzionamento ed eventuali limiti riscontrati.

\chapter{PathS Server} %------------------------------ PATHS SERVER
\thispagestyle{empty}

Introduzione alla componente \emph{server} di \emph{PathS}. 

\section{Requisiti}
Dettaglio dei requisiti per la parte server: raccolta campioni, persistenza, interfacciamento con il client, associazione dei campioni ai percorsi, servizio di routing.

\section{Componenti}
Identificazione delle componenti logiche del server sulla base delle funzioni che deve svolgere.
\subsection{Ricezione dei campioni}
La componente di ricezione campioni deve colloquiare con il client. Necessità di definire un formato chiaro e \emph{standard}, facilmente implementabile con qualsiasi tecnologia \emph{client} ed eventualmente da altri sorgenti dati.
\subsection{Elaborazione dei campioni}
I campioni così come sono ricevuti dai client sono in formato grezzo e non consentono di sfruttare le inormazioni in esse contenute. Il passo principale per l'utilizzo dei dati è quello di associare ciascun dato ad un segmento della rete di trasporto. 
\subsection{Interrogazione}
Lo scopo pensato per l'utilizzo delle informazioni raccolte è quello di fornire servizi \emph{routing} alternativi, che tengano conto dei dati raccolti per suggerire percorsi che vanno oltre la semplice regola del percorso più breve. Il componente deve quindi:
\begin{itemize}
\item definire un formato di colloquio con il client per i percorsi;
\item implementare un algoritmo di routing;
\item modificare l'algoritmo di routing affinché consideri le informazioni aggiuntive.
\end{itemize}

\section{Tecnologie e linee guida}
Tecnologie e librerie selezionate per l'applicazione globale al sistema server (Play! Framework, PostgresSQL, LeafletJS, Bootstrap). Presentazione dei criteri non funzionali con i quali è stato sviluppato il server (suddivisione delle responsabilità, astrazione, estensibilità).

\chapter{Ricezione dei campioni} %------------------------------ RICEZIONE CAMPIONI
\section{Formato}
Definizione e modifiche al formato di comunicazione.
\section{Implementazione}
Modalità di implementazione e deserializzazione dei dati.
\section{Esempi}
Esempio di invio dal client e risultati ottenuti.

\chapter{Elaborazione dei campioni} %------------------------------ ELABORAZIONE CAMPIONI
\section{Servizi di Cartografia}
Requisiti per la selezione di un servizio di mappe su cui basarsi. Analisi comparativa e aspetti principali di:
\begin{itemize}
\item Google Maps
\item Openstreet Map
\end{itemize}
Il servizio di interrogazione \emph{Overpass API}, funzionalità e tipo di \emph{query} implementata.

\section{Persistenza ed eleaborazione dei dati GIS}
Libreria scelta per la persistenza dei dati PostGIS, modello dati del DB e tipi utilizzati. Operazioni di interrogazione supportate dall'estensione del database.
Libreria scelta per la manipolazione dei dati in ambiente \emph{JAVA}:\emph{JTS}. Operazioni necessarie ed esempi di utilizzo. 

\section{Algoritmo di Map Matching}
Perchè è necessario eseguire una operazione di \emph{map matching}. A cosa servono questo tipo di algoritmi, panoramica sullo stato dell'arte e le soluzioni possibili.
\subsection{ST-MapMatching}
Esposizione delle caratteristiche principali dell'algoritmo come presentato in \cite{stmapmatching}.
\subsection{Pre-elaborazione del percorso - step 1}
Calcolo della bounding box, recupero della rete di trasporto coinvolta e inserimento a sistema.
\subsection{Identificazione dei candidati - step 2}
Definizione e modalità di calcolo dei candidati. Operazioni implementate ed esempi di esecuzione.
\subsection{Valutazione e selezione dei candidati - step 3}
Applicazione della valutazione spazio-temporale dei campioni. Algoritmo di selezione dei candidati da assegnare ai campioni. 

\chapter{Routing} %------------------------------ ROUTING
Requisiti del servizio di routing. Definizione del formato di colloquio (GeoJSON) e interpretazione lato client.
\section{Implementazione}
Modalità generali di implementazione e interfaccia \emph{Router}.
Pre-elaborazione e gestione dei segmenti a sistema tramite operazione di \emph{noding} e creazione della topologia (nodi e archi).
\section{Percorsi calcolati}
\subsection{Servizio Map Quest}
Interrogazione del servizio Map Quest come riscontro e \emph{fallback}. 
\subsection{Shortest Path}
Calcolo del percorso minimo con la libreria PGRouting.
\subsection{Percorsi con \emph{label}}
Calcolo dei percorsi valutando le label di luminosità e rumorosità. Viste e funzioni di supporto sul database. Modalità di calcolo dei costi, spiegazione delle formule.

\chapter{Conclusione} %------------------------------ CONCLUSIONE
\section{Risultati}
Risultato complessivo del progetto. Funzionamento end-to-end con screenshot ed esempi.
\section{Miglioramenti ed Evoluzioni}
Limiti e compromessi dell'attuale implementazione. Aree di miglioramento ed evoluzione, tra cui:
\begin{itemize}
\item suddivisione ulteriore dei tratti di percorso;
\item alternative algoritmi di map-matching;
\item altri algoritmi di routing;
\item servizi aggiuntivi al routing (analisi dei posti più frequentati, funzioni ``get-together'' e \emph{social oriented}).
\end{itemize}

\backmatter

\begingroup %------------------------------ BIBLIOGRAPHY
  \makeatletter
  \let\ps@plain\ps@empty
  \makeatother
  \bibliography{tesi}
  \addcontentsline{toc}{chapter}{Bibliography}
  \bibliographystyle{ieeetr} % sort in order of appearance
\endgroup
\end{document} 